<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>YouTube to MP3 — MultiImageX</title>
<meta name="description" content="Convert YouTube videos to MP3 using MultiImageX. Server required (yt-dlp + ffmpeg). This tool provides a fast conversion pipeline and download link.">
<meta name="keywords" content="youtube to mp3, yt to mp3, convert youtube to mp3, multiimagex, audio extractor">
<link rel="canonical" href="https://www.multiimagex.online/tools/yt-video-to-mp3/">
<style>body{font-family:Inter,system-ui,Arial;background:#f7fafc;margin:0;color:#0b1220}header{background:linear-gradient(90deg,#2563eb,#7c5cff);color:#fff;padding:16px;text-align:center}main{max-width:920px;margin:18px auto;padding:18px}.card{background:#fff;padding:14px;border-radius:10px}</style>
</head>
<body>
<header><h1>YouTube to MP3 — MultiImageX</h1><div style="opacity:.9">Server required: yt-dlp + ffmpeg. Use responsibly (download only owned or permitted content).</div></header>
<main>
  <div class="card">
    <label>Paste YouTube URL</label>
    <input id="videoUrl" style="width:70%;padding:10px;border-radius:8px;border:1px solid #e6eef8">
    <button id="convert">Convert to MP3</button>
    <div id="status" style="margin-top:12px;color:#374151">Idle</div>
    <div id="result" style="margin-top:12px"></div>
  </div>
</main>
<script>
// Frontend expects server endpoint POST /api/convert-mp3 with JSON {url}
async function convert(){
  const url = document.getElementById('videoUrl').value.trim(); if(!url){alert('Enter YouTube URL');return}
  document.getElementById('status').innerText='Requesting conversion...'; document.getElementById('result').innerHTML='';
  try{
    const res = await fetch('/api/convert-mp3',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({url})});
    const j = await res.json(); if(!j.ok){ document.getElementById('status').innerText='Error: '+(j.error||'conversion failed'); return }
    document.getElementById('status').innerText='Conversion complete'; document.getElementById('result').innerHTML = `<a href="${j.downloadUrl}" download>Download MP3</a>`;
  }catch(err){ document.getElementById('status').innerText='Server error: '+err.message }
}
document.getElementById('convert').addEventListener('click',convert);
</script>
</body>
</html>


<!-- SERVER: server.js (example) -->

/*
Example Node.js server using yt-dlp and express. Install prerequisites on server:
- yt-dlp (https://github.com/yt-dlp/yt-dlp)
- ffmpeg
- npm packages: express, express-rate-limit

Save as server.js and run: node server.js
*/

const serverCode = `const express = require('express');
const rateLimit = require('express-rate-limit');
const { spawn } = require('child_process');
const path = require('path');
const fs = require('fs');
const os = require('os');
const app = express();
app.use(express.json());

// simple rate limiter
const limiter = rateLimit({ windowMs: 60*1000, max: 6 });
app.use(limiter);

const TEMP = process.env.TEMP_FOLDER || path.join(os.tmpdir(),'multiimagex-yt'); if(!fs.existsSync(TEMP)) fs.mkdirSync(TEMP,{recursive:true});

function safeName(id){ return 'audio-'+Date.now()+'-'+id.replace(/[^a-z0-9]/gi,'').slice(0,30)+'.mp3'; }

app.post('/api/convert-mp3', async (req,res)=>{
  const { url } = req.body; if(!url) return res.json({ok:false,error:'url required'});
  // validate basic youtube URL
  if(!/youtube|youtu\.be/.test(url)) return res.json({ok:false,error:'only youtube urls allowed'});
  const outName = safeName('mp3'); const outPath = path.join(TEMP, outName);
  // yt-dlp args: extract audio to mp3
  const args = ['-x','--audio-format','mp3','-o', outPath.replace(/\.mp3$/,'.%(ext)s'), url];
  const proc = spawn('yt-dlp', args);
  let stderr=''; proc.stderr.on('data',d=> stderr += d.toString());
  proc.on('close', code=>{
    // find latest mp3 file
    const files = fs.readdirSync(TEMP).filter(f=>f.endsWith('.mp3')).map(f=> ({f, m:fs.statSync(path.join(TEMP,f)).mtimeMs})).sort((a,b)=>b.m - a.m);
    if(!files.length) return res.json({ok:false,error:'conversion failed',details:stderr});
    const latest = files[0].f; return res.json({ok:true,downloadUrl:'/static/'+encodeURIComponent(latest)});
  });
});

app.use('/static', express.static(TEMP));
const PORT = process.env.PORT || 3000; app.listen(PORT, ()=> console.log('Server running on', PORT));`;

console.log('server.js example prepared. Save serverCode content to server.js on your server.');
