<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Aspect Ratio Converter - MultiImageX</title>
<meta name="description" content="MultiImageX: Online Image Aspect Ratio Converter. Crop, fit, or adjust images to any aspect ratio including 1:1, 5:7, 16:9, 21:9, 2.35:1 and more. Free online tool for images.">
<meta name="keywords" content="multiimagex, image aspect ratio, image crop, image adjust, 1:1, 3:2, 4:3, 5:7, 4:5, 5:6, 11:14, 2:1, 3:1, 4:1, 16:9, 16:10, 17:9, 18:9, 19:9, 19.5:9, 20:9, 21:9, 32:9, 48:9, 64:27, 1.17:1, 1.19:1, 1.33:1, 1.37:1, 1.43:1, 1.50:1, 1.66:1, 1.75:1, 1.78:1, 1.85:1, 2.00:1, 2.20:1, 2.35:1, 2.39:1, 2.40:1, 2.55:1, 2.76:1, 3:1, 1.89:1, 2.21:1, 9:16, 2:3, 10:7, 14:9, 25:16, 32:15, 9:8, 7:5">
<script src="https://cdn.tailwindcss.com"></script>
<style>
  .ratio-frame { position: relative; overflow: hidden; background: #f0f0f0; margin-bottom: 1rem; touch-action: none; }
  .ratio-frame img { position: absolute; top: 0; left: 0; cursor: grab; user-select: none; transform-origin: top left; }
</style>
</head>
<body class="bg-gray-50 min-h-screen font-sans">
<div class="max-w-5xl mx-auto p-6">
  <h1 class="text-2xl font-bold mb-4">Aspect Ratio Converter - MultiImageX</h1>

  <input type="file" id="fileInput" class="mb-4 p-2 border rounded w-full" accept="image/*">

  <div class="flex gap-2 mb-4">
    <button id="cropMode" class="px-3 py-2 bg-sky-500 text-white rounded">Crop</button>
    <button id="fitMode" class="px-3 py-2 bg-slate-100 rounded">Fit</button>
    <button id="adjustMode" class="px-3 py-2 bg-slate-100 rounded">Adjust</button>
  </div>

  <div class="grid grid-cols-2 gap-3 mb-4">
    <div>
      <label class="block">Width (px)</label>
      <input type="number" id="customWidth" class="w-full p-2 border rounded" value="800">
    </div>
    <div>
      <label class="block">Height (px)</label>
      <input type="number" id="customHeight" class="w-full p-2 border rounded" value="600">
    </div>
  </div>

  <input type="search" id="ratioSearch" placeholder="Search ratio (e.g., 5:7, 16:9)" class="w-full p-2 border rounded mb-4">
  <div id="ratioList" class="max-h-64 overflow-auto mb-4"></div>

  <div id="frameContainer" class="ratio-frame" style="width:800px; height:600px;"></div>

  <button id="downloadBtn" class="px-4 py-2 bg-green-600 text-white rounded">Download</button>
</div>

<script>
const RATIO_PRESETS=[
{ id:'1:1', label:'1:1', ratio:1 }, { id:'3:2', label:'3:2', ratio:3/2 }, { id:'4:3', label:'4:3', ratio:4/3 },
{ id:'5:7', label:'5:7', ratio:5/7 }, { id:'4:5', label:'4:5', ratio:4/5 }, { id:'5:6', label:'5:6', ratio:5/6 },
{ id:'11:14', label:'11:14', ratio:11/14 }, { id:'2:1', label:'2:1', ratio:2 }, { id:'3:1', label:'3:1', ratio:3 },
{ id:'4:1', label:'4:1', ratio:4 }, { id:'16:9', label:'16:9', ratio:16/9 }, { id:'16:10', label:'16:10', ratio:16/10 },
{ id:'17:9', label:'17:9', ratio:17/9 }, { id:'18:9', label:'18:9', ratio:18/9 }, { id:'19:9', label:'19:9', ratio:19/9 },
{ id:'19.5:9', label:'19.5:9', ratio:19.5/9 }, { id:'20:9', label:'20:9', ratio:20/9 }, { id:'21:9', label:'21:9', ratio:21/9 },
{ id:'32:9', label:'32:9', ratio:32/9 }, { id:'48:9', label:'48:9', ratio:48/9 }, { id:'64:27', label:'64:27', ratio:64/27 },
{ id:'1.17:1', label:'1.17:1', ratio:1.17 }, { id:'1.19:1', label:'1.19:1', ratio:1.19 }, { id:'1.33:1', label:'1.33:1', ratio:1.33 },
{ id:'1.37:1', label:'1.37:1', ratio:1.37 }, { id:'1.43:1', label:'1.43:1', ratio:1.43 }, { id:'1.50:1', label:'1.50:1', ratio:1.5 },
{ id:'1.66:1', label:'1.66:1', ratio:1.66 }, { id:'1.75:1', label:'1.75:1', ratio:1.75 }, { id:'1.78:1', label:'1.78:1', ratio:1.78 },
{ id:'1.85:1', label:'1.85:1', ratio:1.85 }, { id:'2.00:1', label:'2.00:1', ratio:2 }, { id:'2.20:1', label:'2.20:1', ratio:2.2 },
{ id:'2.35:1', label:'2.35:1', ratio:2.35 }, { id:'2.39:1', label:'2.39:1', ratio:2.39 }, { id:'2.40:1', label:'2.40:1', ratio:2.4 },
{ id:'2.55:1', label:'2.55:1', ratio:2.55 }, { id:'2.76:1', label:'2.76:1', ratio:2.76 }, { id:'3:1', label:'3:1', ratio:3 },
{ id:'1.89:1', label:'1.89:1', ratio:1.89 }, { id:'2.21:1', label:'2.21:1', ratio:2.21 },
{ id:'9:16', label:'9:16', ratio:9/16 }, { id:'2:3', label:'2:3', ratio:2/3 }, { id:'10:7', label:'10:7', ratio:10/7 },
{ id:'14:9', label:'14:9', ratio:14/9 }, { id:'25:16', label:'25:16', ratio:25/16 }, { id:'32:15', label:'32:15', ratio:32/15 },
{ id:'9:8', label:'9:8', ratio:9/8 }, { id:'7:5', label:'7:5', ratio:7/5 }
];

let selectedRatio = RATIO_PRESETS[0];
let mode='crop';
let imgEl=null, imgX=0, imgY=0, imgScale=1;
let startX=0, startY=0, dragging=false, lastDist=0;

const fileInput=document.getElementById('fileInput');
const frameContainer=document.getElementById('frameContainer');
const customWidth=document.getElementById('customWidth');
const customHeight=document.getElementById('customHeight');
const ratioList=document.getElementById('ratioList');
const ratioSearch=document.getElementById('ratioSearch');

function renderRatioList(filter=''){
  ratioList.innerHTML='';
  RATIO_PRESETS.filter(r=>r.label.includes(filter)).forEach(r=>{
    const btn=document.createElement('button');
    btn.textContent=r.label;
    btn.className='w-full text-left p-2 rounded border mb-1';
    btn.onclick=()=>{ selectedRatio=r; setFrameSize(); };
    ratioList.appendChild(btn);
  });
}
ratioSearch.addEventListener('input',()=>{renderRatioList(ratioSearch.value)});
renderRatioList();

function setFrameSize(){
  const w=parseInt(customWidth.value);
  const h=Math.round(w/selectedRatio.ratio);
  frameContainer.style.width=w+'px';
  frameContainer.style.height=h+'px';
  if(imgEl && mode==='fit') fitImage();
}
customWidth.addEventListener('change',setFrameSize);

fileInput.addEventListener('change',e=>{
  const file=e.target.files[0];
  if(!file) return;
  const reader=new FileReader();
  reader.onload=ev=>{
    if(imgEl) frameContainer.removeChild(imgEl);
    imgEl=document.createElement('img');
    imgEl.src=ev.target.result;
    imgEl.style.transform='translate(0px,0px) scale(1)';
    frameContainer.appendChild(imgEl);
    imgX=0; imgY=0; imgScale=1;
    if(mode==='fit') fitImage();
  }
  reader.readAsDataURL(file);
});

document.getElementById('cropMode').onclick=()=>{mode='crop'; setModeButtons(); cropImage();}
document.getElementById('fitMode').onclick=()=>{mode='fit'; setModeButtons(); fitImage();}
document.getElementById('adjustMode').onclick=()=>{mode='adjust'; setModeButtons();};

function setModeButtons(){
  document.getElementById('cropMode').className='px-3 py-2 rounded '+(mode==='crop'?'bg-sky-500 text-white':'bg-slate-100');
  document.getElementById('fitMode').className='px-3 py-2 rounded '+(mode==='fit'?'bg-sky-500 text-white':'bg-slate-100');
  document.getElementById('adjustMode').className='px-3 py-2 rounded '+(mode==='adjust'?'bg-sky-500 text-white':'bg-slate-100');
}

function cropImage(){
  if(!imgEl) return;
  const w=frameContainer.clientWidth, h=frameContainer.clientHeight;
  imgEl.style.width=imgEl.naturalWidth>w ? imgEl.naturalWidth+'px':'100%';
  imgEl.style.height='auto';
  imgEl.style.transform='translate(0px,0px) scale(1)';
}

function fitImage(){
  if(!imgEl) return;
  const w=frameContainer.clientWidth, h=frameContainer.clientHeight;
  const rImg=imgEl.naturalWidth/imgEl.naturalHeight, rFrame=w/h;
  if(rImg>rFrame){ imgEl.style.width=w+'px'; imgEl.style.height='auto'; }
  else { imgEl.style.height=h+'px'; imgEl.style.width='auto'; }
  imgEl.style.transform='translate(0px,0px) scale(1)';
}

// Adjust Mode: mouse & touch
frameContainer.addEventListener('mousedown', e=>{ if(mode!=='adjust') return; dragging=true; startX=e.clientX-imgX; startY=e.clientY-imgY;});
window.addEventListener('mouseup', e=>{dragging=false;});
window.addEventListener('mousemove', e=>{ if(mode!=='adjust'||!dragging) return; imgX=e.clientX-startX; imgY=e.clientY-startY; imgEl.style.transform=`translate(${imgX}px,${imgY}px) scale(${imgScale})`;});
frameContainer.addEventListener('wheel', e=>{ if(mode!=='adjust') return; e.preventDefault(); imgScale += e.deltaY*-0.001; if(imgScale<0.1) imgScale=0.1; imgEl.style.transform=`translate(${imgX}px,${imgY}px) scale(${imgScale})`;});

// Touch support
frameContainer.addEventListener('touchstart', e=>{
  if(mode!=='adjust'||!imgEl) return;
  if(e.touches.length===1){ dragging=true; startX=e.touches[0].clientX-imgX; startY=e.touches[0].clientY-imgY; }
  else if(e.touches.length===2){ dragging=false; const dx=e.touches[0].clientX-e.touches[1].clientX, dy=e.touches[0].clientY-e.touches[1].clientY; lastDist=Math.hypot(dx,dy);}
});
frameContainer.addEventListener('touchmove', e=>{
  if(mode!=='adjust'||!imgEl) return; e.preventDefault();
  if(e.touches.length===1 && dragging){ imgX=e.touches[0].clientX-startX; imgY=e.touches[0].clientY-startY; }
  else if(e.touches.length===2){ const dx=e.touches[0].clientX-e.touches[1].clientX, dy=e.touches[0].clientY-e.touches[1].clientY; const dist=Math.hypot(dx,dy); let delta=dist/lastDist; imgScale*=delta; if(imgScale<0.1) imgScale=0.1; lastDist=dist;}
  imgEl.style.transform=`translate(${imgX}px,${imgY}px) scale(${imgScale})`;
});
window.addEventListener('touchend', e=>{dragging=false;});

// Download
document.getElementById('downloadBtn').onclick=()=>{
  if(!imgEl) return;
  const w=parseInt(customWidth.value), h=Math.round(w/selectedRatio.ratio);
  const canvas=document.createElement('canvas'); canvas.width=w; canvas.height=h;
  const ctx=canvas.getContext('2d');
  const scaleX=imgEl.naturalWidth/imgEl.width, scaleY=imgEl.naturalHeight/imgEl.height;
  const dx=-imgX*scaleX, dy=-imgY*scaleY;
  ctx.drawImage(imgEl, dx, dy, imgEl.naturalWidth*imgScale, imgEl.naturalHeight*imgScale);
  const a=document.createElement('a'); a.href=canvas.toDataURL('image/jpeg',0.92); a.download=`multiimagex-${selectedRatio.id}.jpg`; a.click();
}
</script>
</body>
</html>
