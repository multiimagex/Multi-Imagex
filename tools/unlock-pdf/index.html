<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Unlock PDF Online | MultiImageX</title>
  <meta name="description" content="Unlock password-protected PDF files online for free. Enter your PDF password to remove protection and download the unlocked PDF or convert it into high-quality images. Fast, secure, and easy to use.">
  <meta name="keywords" content="unlock PDF, remove PDF password, convert PDF to images, PDF unlocker online, free PDF unlock tool, high quality PDF to image">
</head>
<body>
  <h1>Unlock PDF Online</h1>
  <p>Upload your password-protected PDF and enter the correct password to unlock it. You can download the unlocked PDF or convert it into high-quality images.</p>

  <form id="unlockForm" enctype="multipart/form-data">
    <label>Upload PDF: <input type="file" name="pdf" id="pdfFile" accept="application/pdf" required></label><br><br>
    <label>Enter Password: <input type="password" name="password" id="pdfPassword" required></label><br><br>
    <button type="submit">Unlock PDF</button>
  </form>

  <div id="result"></div>

  <script>
    document.getElementById("unlockForm").addEventListener("submit", async (e) => {
      e.preventDefault();
      const formData = new FormData();
      formData.append("pdf", document.getElementById("pdfFile").files[0]);
      formData.append("password", document.getElementById("pdfPassword").value);

      document.getElementById("result").innerHTML = "Processing... Please wait.";

      try {
        const response = await fetch("http://localhost:3000/unlock-pdf", {
          method: "POST",
          body: formData,
        });

        if (!response.ok) {
          const err = await response.json();
          throw new Error(err.message || "Failed to unlock PDF");
        }

        const data = await response.json();

        let html = `<p><b>Unlocked Successfully!</b></p>`;
        if (data.pdfUrl) {
          html += `<a href="${data.pdfUrl}" download="unlocked.pdf">Download Unlocked PDF</a><br>`;
        }
        if (data.images && data.images.length > 0) {
          html += "<h3>Converted Images:</h3>";
          data.images.forEach((img, i) => {
            html += `<div><img src="${img}" style="max-width:300px;"><br>
                     <a href="${img}" download="page-${i + 1}.png">Download Page ${i + 1}</a></div>`;
          });
        }

        document.getElementById("result").innerHTML = html;
      } catch (err) {
        document.getElementById("result").innerHTML = `<p style="color:red;">Error: ${err.message}</p>`;
      }
    });
  </script>
</body>
</html>
